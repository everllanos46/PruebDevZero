<div>
    <form>
        <div>
            <div class="card"
                style="width: 30rem; height: 586px; margin-left: 5%; margin-top: 5%; margin-bottom: 2%; box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4)">
                <div class="card-body">
                    <form>
                        <div class="card">
                            <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                <table class="table table-hover " style="max-width: 100%; max-height: 80%;">
                                  <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th scope="col">Codigo</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Cantidad</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr (click)="productoTabla(i)" *ngFor="let producto of productos; index as i">
                                        <th scope="row">{{ i + 1 }}</th>
                                        <td>{{ producto.codigo }} </td>
                                        <td>{{ producto.nombre }}</td>
                                        <td>{{producto.cantidad }}</td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                        </div>
                        <hr class="solid">
                        <div *ngIf="productoCard!=null">
                            <div class="card" id="cardDescripcion"
                                style="width: 15rem;  margin-left: 20%; margin-top: -2%; box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4)">
                                <div class="card-body">
                                    <h5 class="card-title">{{productoCard.nombre}}</h5>
                                    <label for=""
                                        style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-style: oblique; font-weight: bold;">Descripci√≥n:</label>
                                    <p class="card-text">{{productoCard.description}}</p>
                                    <label for=""
                                        style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-style: oblique; font-weight: bold;">Fecha
                                        Compra:</label>
                                    <p class="card-text">{{productoCard.fecha}}</p>
                                    <label for=""
                                        style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-style: oblique; font-weight: bold;">Precio:</label>
                                    <p class="card-text">{{productoCard.precio}}</p>
                                    <button class="btn btn-primary" type="submit" (click)="agregarCarrito()">Agregar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>


        </div>
        <div *ngIf="agregado==true">
            <div class="card"
                style="width: 40rem; height: 400px; margin-left: 55%; margin-top: -38%; margin-bottom: 2%; box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4)">
                <div class="card-body">
                    <form>
                        <div class="card">
                            <ul class="list-group list-group-flush">
                                <li *ngFor="let carrito of productosCarrito" class="list-group-item d-flex">
                                  <div class="row row-cols-lg-12">
                                      <div class="col-1">
                                        <label> {{carrito.nombre}}</label>
                                      </div>
                                      <div class="col-3">
                                          <div class="form-floating">
                                            <input placeholder="Cantidad" id="{{detalle.producto.id}}"
                                              onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                              [(ngModel)]="detalle.cantidad" (ngModelChange)="validarCambio($event)" type="number" min="0"
                                              class="form-control">
                                            <label for="{{detalle.producto.id}}">Cantidad</label>
                                          </div>
                                      </div>
                                      <div class="col">
                                        <div class="form-group mx-2">
                                          <label>Precio: </label>
                                          <input id="{{detalle.producto.id+1}}" placeholder="{{detalle.producto.precio|currency}}"
                                            [(ngModel)]="this.detalle.precioBase"
                                            onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                             type="number" min="0" class="form-control">
                                        </div>
                                      </div>
                                      <div class="col">
                                        <div class="form-group mx-2">
                                          <label>Descuento:</label>
                                          <input
                                            onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                            [(ngModel)]="this.detalle.descuento"  class="form-control"
                                            type="number" min="0" placeholder=" {{this.detalle.descuento}}%">
                                        </div>
                                      </div>
                                      <div class="col">
                                        <div class="mx-1">
                                          <label>Total: {{detalle.total|currency}}</label>
                                        </div>
                                      </div>
                                      <div class="col">
                                        <button class="btn-close" ></button>
                                      </div>
                                    </div>
                                </li>
                                <hr>
                                <label>SubTotal: </label>
                                <label>Total descontado: </label>
                                <label>Total IVA:  </label>
                                <label>Total:  </label>
                                <button pButton type="button" style="border-radius: 10px;" label="Finalizar Compra" (click)="finalizarCompra()"
                                  class="p-button-outlined"></button>
                              </ul>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </form>
</div>